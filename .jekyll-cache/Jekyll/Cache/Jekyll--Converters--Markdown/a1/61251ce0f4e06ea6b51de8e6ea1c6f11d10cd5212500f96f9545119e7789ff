I"n‚<p><a href="https://jekyllrb.com/">Jekyll</a> es un generador de sitios web estÃ¡ticos preparado para blogging creado en Ruby por <a href="https://www.wikiwand.com/en/Tom_Preston-Werner">Tom Preston</a>, el cofundador de Github.</p>

<p>Jekyll es el motor detrÃ¡s de <a href="https://pages.github.com/">GitHub Pages</a> por lo que puedes alojar tu sitio web en GitHub de forma gratuita.</p>

<p>Jekyll utiliza <a href="https://shopify.github.io/liquid/">Liquid</a> de Shopify como motor de plantillas.</p>

<p>Los posts en Jekyll normalmente se escriben en <a href="https://daringfireball.net/projects/markdown/">Markdown</a>, pero puedes utilizar HTML.</p>

<p>En el inicio de cada post y pÃ¡gina en Jekyll va un bloque de cÃ³digo <a href="http://yaml.org/">YAML Frontmatter</a>.</p>

<p>El cÃ³digo YAML siempre va al principio entre triples guiones.</p>

<p>YAML tiene este aspecto:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
layout: post
title: I have no idea what i'm doing
---
</code></pre></div></div>

<p>La estructura de un sitio en Jekyll es algo asÃ­:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.
â”œâ”€â”€ _config.yml
â”œâ”€â”€ _data
|   â””â”€â”€ members.yml
â”œâ”€â”€ _drafts
|   â”œâ”€â”€ el-post-que-me-hara-famoso.md
|   â””â”€â”€ el-post-que-no-terminare-de-escribir.md
â”œâ”€â”€ _includes
|   â”œâ”€â”€ footer.html
|   â””â”€â”€ header.html
â”œâ”€â”€ _layouts
|   â”œâ”€â”€ default.html
|   â””â”€â”€ post.html
â”œâ”€â”€ _posts
|   â”œâ”€â”€ 2017-10-29-no-tengo-ni-idea-de-lo-que-estoy-haciendo.md
|   â””â”€â”€ 2017-04-26-mi-primer-post-en-jekyll.md
â”œâ”€â”€ _sass
|   â”œâ”€â”€ _base.scss
|   â””â”€â”€ _layout.scss
â”œâ”€â”€ _site
â””â”€â”€ index.html
# tambiÃ©n puede ser 'index.md' con YAML Frontmatter
</code></pre></div></div>

<p><strong>_config.yml</strong> es el archivo de configuraciÃ³n de Jekyll donde podemos declarar las variables que queramos. Para aceder a las variables declaradas en _config.yml desde nuestras plantillas utilizaremeos la sintaxis {{ site.mi_variable }}.</p>

<p><strong>_drafts</strong> es la carpeta donde guardamos los posts en los que estamos trabajando, pero que todavÃ­a no hemos terminado.</p>

<h3 id="instalaciÃ³n-de-jekyll">InstalaciÃ³n de Jekyll</h3>

<p>Si ya tienes <a href="https://www.ruby-lang.org/en/downloads/">Ruby</a> y <a href="https://rubygems.org/pages/download">RubyGems</a> instalados en tu mÃ¡quina, puedes crear un nuevo sitio en Jekyll de este modo:</p>

<p>Instalar las gemas Jekyll y Bundler a traves de RubyGems
<code class="language-plaintext highlighter-rouge">$ gem install jekyll bundler</code></p>

<p>Crear un nuevo sito Jekyll en ./myblog
<code class="language-plaintext highlighter-rouge">$ jekyll new myblog</code></p>

<p>Cambiar a tu nuevo directorio
<code class="language-plaintext highlighter-rouge">$ cd myblog</code></p>

<p>Montar el sitio en el servidor local
<code class="language-plaintext highlighter-rouge">$ bundle exec jekyll serve</code></p>

<p>Ahora puedes ver tu sitio en <code class="language-plaintext highlighter-rouge">http://localhost:4000</code></p>

<div class="alert alert-info" role="alert">
  <p><i class="fas fa-sticky-note"></i> Nota:</p>
  <p>Oficialmente Jekyll no tiene soporte para Windows, pero puede instalarse en Windows, con un poco de trabajo extra.</p>
  Instrucciones para instalar <a href="https://jekyllrb.com/docs/windows/#installation">Jekyll en Windows.</a>
</div>

<h3 id="temas">Temas</h3>

<p>Los Temas en Jekyll tambiÃ©n son gemas de Ruby, puede que esto no sea raro en el mundo de Ruby pero si para los neÃ³fitos como yo.</p>

<p>QuÃ© significa esto?</p>

<p>Cuando creas un nuevo sitio en Jekyll con <code class="language-plaintext highlighter-rouge">jekyll new new-shiny-site</code>, Jekyll instala un sitio con el tema <a href="https://github.com/jekyll/minima">Minima</a>, con el sistema de gemas.</p>

<p>Con este sistema algunos de los directorios como <code class="language-plaintext highlighter-rouge">assets</code>,<code class="language-plaintext highlighter-rouge">_layouts</code>,<code class="language-plaintext highlighter-rouge">_includes</code> y <code class="language-plaintext highlighter-rouge">_sass</code> se quedan ocultos en las gemas del tema, aunque sean leÃ­dos y procesados por Jekyll, no los vas a ver en tu directorio principal y por lo tanto, no vas a poder trabajar con ellos.</p>

<h3 id="convertir-un-tema-basado-en-gemas-en-un-tema-en-el-que-podemos-trabajar">Convertir un tema basado en gemas en un tema en el que podemos trabajar</h3>

<p>Para poder crear nuestros temas queremos que todos los archivos estÃ©n a mano en el directorio principal de Jekyll, no en el mundo mÃ¡gico de las gemas.</p>

<p>Puedes descargar <a href="https://github.com/jekyll/minima" target="_blank">minima</a> para copiar los archivos del theme en el directorio principal y eliminar las referencias al tema original basado en gemas, en este caso minima.</p>

<p>Eliminar referencias al gem theme:</p>

<ol>
  <li>Abre el archivo <code class="language-plaintext highlighter-rouge">Gemfile</code> y elimina o comenta la lÃ­nea donde hace referencia al theme <code class="language-plaintext highlighter-rouge">gem "minima", "~&gt; 2.0"</code>.</li>
  <li>Abre el archivo de configuraciÃ³n de Jekyll <code class="language-plaintext highlighter-rouge">_config.yml</code> y elimina <code class="language-plaintext highlighter-rouge">theme: minima</code>.</li>
</ol>

<p>Si has llegado hasta aquÃ­, felicidades! Ahora tienes un tema totalmente independiente (e inservible).</p>

<div class="alert alert-warning" role="alert">
<p><i class="fa fa-exclamation" aria-hidden="true"></i> Advertencia:</p>
  <p>Hemos eliminado todas las referencias al tema inicial por lo que ahora tu Jekyll va a dar errores.</p>
  <p>Te darÃ¡ el error de que no encuentra los svg de los iconos sociales en el footer, elimina esa parte y cualquier otra que te de errores, ahora el tema es tuyo! No tengas miedo de cargarte todo lo que no te haga falta de minima theme.</p>
  <p>Las clases, puedes eliminarlas o reusarlas si te gusta como estÃ¡n nombradas, pero ya no hacen referencia a ningÃºn css, tendrÃ¡s que crear tus propios estilos para darle forma de nuevo al tema. Tranquilo, minima es un tema muy simple y no hay mucho que eliminar realmente.</p>
</div>

<p>Hemos instalado Jekyll y preparado los archivos para nuestro tema, nos hemos cargado las referencias al theme original y nos hemos quedado con un churro de website, enhorabuena!!</p>

<p>Edita los estilos para que la cosa quede presentable y pasamos a la siguiente tarea, aÃ±adir Gulp!</p>
<h3 id="gulp"><a href="https://gulpjs.com/">Gulp</a></h3>

<p>Gulp es un automatizador de tareas hecho en Node.js.</p>

<p>Tanto el cÃ³digo de Gulp como tu Gulp file donde defines tus tareas estÃ¡n escritos en JavaScript.</p>

<p>Gulp nos ayuda a organizar, compilar y optimizar nuestro cÃ³digo.</p>

<p>Gulp usado correctamente puede mejorar tu workflow y la nota de tu sitio web en Google Page Speed.</p>

<p>Gulp te da total libertad a la hora de organizar el cÃ³digo por lo que los requisitos de la estructura de archivos de tu sitio no serÃ¡n un problema.</p>

<p>La instalaciÃ³n de Gulp se hace con npm.</p>

<p>Instalar Gulp sencillo, primero se tiene que instalar globalmente:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npm <span class="nb">install</span> <span class="nt">-g</span> gulp
</code></pre></div></div>

<p>DespuÃ©s tienes que instalarlo en tu proyecto:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npm <span class="nb">install</span> <span class="nt">--save-dev</span> gulp
</code></pre></div></div>
<h3 id="determinar-que-tareas-quieres-que-haga-jekyll-y-que-tareas-quieres-que-haga-gulp">Determinar que tareas quieres que haga Jekyll y que tareas quieres que haga Gulp</h3>

<p>Tanto Jekyll como Gulp pueden procesar Sass, copiar assets a _dist y lanzar un server local, por lo que tendrÃ¡s que elegir que tareas quieres que haga cada uno.</p>

<p>Tienes mucha libertad para hacer esto, esta es mi elecciÃ³n personal:</p>
<h3 id="tareas-para-jekyll">Tareas para Jekyll</h3>

<ol>
  <li>Limpiar el contenido de _site cada vez que se ejecuta jekyll build.</li>
  <li>Procesar Markdown, gestionar los archivos del Blog y montar los layouts con Liquid y YAML.</li>
  <li>Copiar los assets de la raÃ­z a _site.</li>
</ol>

<p>Jekyll por defecto copia todos los archivos y carpetas que encuentra en la raÃ­z con algunas excepciones:</p>

<ol>
  <li>Carpetas nombradas con un guiÃ³n bajo al principio.</li>
  <li>Archivos con un punto al principio.</li>
  <li>Archivos que especifiques ignorar en tu _config.yml.</li>
</ol>

<p>Estos son los archivos que estoy copiando e ignorando:</p>

<p><strong>Estoy copiando</strong> las pÃ¡ginas que tiene mi proyecto mÃ¡s los assets una vez procesado por Gulp:</p>

<ul>
  <li>about</li>
  <li>assets</li>
  <li>blog</li>
  <li>contact</li>
  <li>open-source</li>
  <li>post</li>
  <li>index.html</li>
</ul>

<p><strong>Estoy excluyendo:</strong></p>

<ul>
  <li>Gemfile</li>
  <li>Gemfile.lock</li>
  <li>vendor</li>
  <li>gulpfile.js</li>
  <li>package-lock.json</li>
  <li>package.json</li>
  <li>node_modules</li>
  <li>README.md</li>
  <li>readme.md</li>
  <li>CHANGELOG.md</li>
</ul>

<h3 id="tareas-para-gulp">Tareas para Gulp</h3>

<ol>
  <li>Copiar las fuentes de _assets a assets</li>
  <li>Procesar estilos</li>
  <li>Procesar Scripts</li>
  <li>Minificar imÃ¡genes</li>
  <li>Ejecutar Jekyll</li>
  <li>Lanzar el servidor local Browsersync</li>
  <li>Vigilar cambios y refrescar el navegador</li>
</ol>

<h3 id="1-fuentes">1. Fuentes</h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">build_fonts</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">gulp</span>
    <span class="p">.</span><span class="nx">src</span><span class="p">(</span><span class="dl">"</span><span class="s2">./_assets/fonts/*.{woff,woff2,eot,svg,ttf}</span><span class="dl">"</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="dl">"</span><span class="s2">./assets/fonts</span><span class="dl">"</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div></div>
<h3 id="2-estilos">2. Estilos</h3>

<p><strong>Procesar estilos</strong></p>

<p>Jekyll por defecto compila Sass, pero hacerlo con Gulp tiene varias ventajas:</p>

<p>Podemos utilizar los plugins de Gulp para procesar estilos, hay muchos, yo de momento he empezado con dos:</p>

<ul>
  <li><strong>gulp-sass</strong>: compila sass.</li>
  <li><strong>gulp-autoprefixer</strong>: aÃ±ade los prefijos de navegador necesarios y elimina los que ya no lo son.</li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">build_styles</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Compiling Sass</span><span class="dl">"</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">config.production:</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">config</span><span class="p">.</span><span class="nx">production</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">production</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">gulp</span>
      <span class="p">.</span><span class="nx">src</span><span class="p">(</span><span class="dl">"</span><span class="s2">./_assets/styles/main.scss</span><span class="dl">"</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span>
        <span class="nx">sass</span><span class="p">({</span>
          <span class="na">includePaths</span><span class="p">:</span> <span class="nx">config</span><span class="p">.</span><span class="nx">sassPaths</span><span class="p">,</span>
          <span class="na">outputStyle</span><span class="p">:</span> <span class="dl">"</span><span class="s2">compressed</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// if css compressed **file size**</span>
        <span class="p">}).</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">error</span><span class="dl">"</span><span class="p">,</span> <span class="nx">sass</span><span class="p">.</span><span class="nx">logError</span><span class="p">)</span>
      <span class="p">)</span>
      <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span>
        <span class="nx">autoprefixer</span><span class="p">({</span>
          <span class="na">browsers</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">last 2 versions</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">ie &gt;= 9</span><span class="dl">"</span><span class="p">],</span>
        <span class="p">})</span>
      <span class="p">)</span>
      <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="dl">"</span><span class="s2">./assets/styles</span><span class="dl">"</span><span class="p">))</span>
      <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="dl">"</span><span class="s2">./_site/assets/styles</span><span class="dl">"</span><span class="p">));</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">gulp</span>
      <span class="p">.</span><span class="nx">src</span><span class="p">(</span><span class="dl">"</span><span class="s2">./_assets/styles/main.scss</span><span class="dl">"</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span>
        <span class="nx">sass</span><span class="p">({</span>
          <span class="na">includePaths</span><span class="p">:</span> <span class="nx">config</span><span class="p">.</span><span class="nx">sassPaths</span><span class="p">,</span>
          <span class="na">outputStyle</span><span class="p">:</span> <span class="dl">"</span><span class="s2">expanded</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// if css compressed **file size**</span>
        <span class="p">}).</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">error</span><span class="dl">"</span><span class="p">,</span> <span class="nx">sass</span><span class="p">.</span><span class="nx">logError</span><span class="p">)</span>
      <span class="p">)</span>
      <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">autoprefixer</span><span class="p">())</span>
      <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="dl">"</span><span class="s2">./assets/styles</span><span class="dl">"</span><span class="p">))</span>
      <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="dl">"</span><span class="s2">./_site/assets/styles</span><span class="dl">"</span><span class="p">))</span>
      <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span>
        <span class="nx">browserSync</span><span class="p">.</span><span class="nx">reload</span><span class="p">({</span>
          <span class="na">stream</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="p">})</span>
      <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>


<span class="err">###</span> <span class="mi">3</span><span class="p">.</span> <span class="nx">Scripts</span>
<span class="err">###</span> <span class="mi">4</span><span class="p">.</span> <span class="nx">ImÃ¡genes</span>
<span class="err">###</span> <span class="mi">5</span><span class="p">.</span> <span class="nx">Jekyll</span>

<span class="err">###</span> <span class="mi">6</span><span class="p">.</span> <span class="nx">Browsersync</span>

<span class="p">[</span><span class="nx">Browsersync</span><span class="p">](</span><span class="nx">https</span><span class="p">:</span><span class="c1">//browsersync.io/){:target="_blank"} es un servidor local muy Ãºtil para desarrollo.</span>

<span class="nx">Es</span> <span class="nx">lo</span> <span class="nx">mismo</span> <span class="nx">que</span> <span class="nx">utilizar</span> <span class="nx">jekyll</span> <span class="nx">serve</span> <span class="nx">y</span> <span class="nx">recargar</span> <span class="nx">la</span> <span class="nx">pÃ¡gina</span> <span class="nx">manualmente</span> <span class="nx">pero</span> <span class="nx">mÃ¡s</span> <span class="nx">rÃ¡pido</span> <span class="nx">y</span> <span class="nx">con</span> <span class="nx">algunas</span> <span class="nx">ventajas</span><span class="p">:</span>

<span class="o">-</span> <span class="nx">Actualiza</span> <span class="nx">el</span> <span class="nx">navegador</span> <span class="nx">automÃ¡ticamente</span> <span class="nx">en</span> <span class="nx">varios</span> <span class="nx">dispositivos</span> <span class="nx">y</span> <span class="nx">navegadores</span><span class="p">.</span>

<span class="o">-</span> <span class="nx">Todos</span> <span class="nx">los</span> <span class="nx">navegadores</span> <span class="nx">siguen</span> <span class="nx">el</span> <span class="nx">scroll</span> <span class="nx">hasta</span> <span class="nx">el</span> <span class="nx">mismo</span> <span class="nx">punto</span><span class="p">.</span>

<span class="o">-</span> <span class="nx">Todos</span> <span class="nx">los</span> <span class="nx">navegadores</span> <span class="nx">cargan</span> <span class="nx">los</span> <span class="nx">links</span> <span class="nx">al</span> <span class="nx">hacer</span> <span class="nx">click</span><span class="p">.</span>

<span class="o">-</span> <span class="nx">Puede</span> <span class="nx">simular</span> <span class="nx">conexiones</span> <span class="nx">lentas</span><span class="p">,</span> <span class="nx">Browsersync</span> <span class="nx">puede</span> <span class="nx">simular</span> <span class="nx">que</span> <span class="nx">estas</span> <span class="nx">visitando</span> <span class="nx">tu</span> <span class="nx">web</span> <span class="nx">desde</span> <span class="nx">un</span> <span class="nx">lugar</span> <span class="nx">donde</span> <span class="nx">no</span> <span class="nx">llegan</span> <span class="nx">los</span> <span class="mi">50</span><span class="nx">MB</span> <span class="nx">de</span> <span class="nx">fibra</span> <span class="nx">que</span> <span class="nx">tienes</span> <span class="nx">en</span> <span class="nx">casa</span><span class="p">.</span>

<span class="o">-</span> <span class="nx">Es</span> <span class="nx">compatible</span> <span class="nx">con</span> <span class="nx">Gulp</span><span class="p">.</span>

<span class="o">-</span> <span class="nx">Es</span> <span class="nx">gratis</span> <span class="nx">y</span> <span class="nx">opensource</span><span class="p">.</span>

<span class="nx">Browsersync</span> <span class="nx">te</span> <span class="nx">facilita</span> <span class="nx">cuatro</span> <span class="nx">URL</span><span class="p">:</span>

<span class="mi">1</span><span class="p">.</span> <span class="o">**</span><span class="nx">Local</span><span class="o">**</span><span class="p">:</span> <span class="nx">donde</span> <span class="nx">puedes</span> <span class="nx">ver</span> <span class="nx">tu</span> <span class="nx">proyecto</span><span class="p">.</span>
<span class="mi">1</span><span class="p">.</span> <span class="o">**</span><span class="nx">Externa</span><span class="o">**</span><span class="p">:</span> <span class="nx">la</span> <span class="nx">direcciÃ³n</span> <span class="nx">donde</span> <span class="nx">cualquier</span> <span class="nx">usuario</span> <span class="nx">en</span> <span class="nx">tu</span> <span class="nx">red</span> <span class="nx">local</span> <span class="p">(</span><span class="nx">Lan</span> <span class="nx">o</span> <span class="nx">Wifi</span><span class="p">)</span> <span class="nx">puede</span> <span class="nx">ver</span> <span class="nx">el</span> <span class="nx">proyecto</span><span class="p">.</span>
<span class="mi">1</span><span class="p">.</span> <span class="o">**</span><span class="nx">UI</span><span class="o">**</span><span class="p">:</span> <span class="nx">Browserync</span> <span class="nx">UI</span> <span class="nx">te</span> <span class="nx">muestra</span> <span class="nx">todas</span> <span class="nx">las</span> <span class="nx">opciones</span> <span class="nx">de</span> <span class="nx">Browsersync</span><span class="p">.</span>
<span class="mi">1</span><span class="p">.</span> <span class="o">**</span><span class="nx">UI</span> <span class="nx">Externa</span><span class="o">**</span><span class="p">:</span> <span class="nx">La</span> <span class="nx">UI</span> <span class="nx">para</span> <span class="nx">cualquier</span> <span class="nx">usuario</span> <span class="nx">de</span> <span class="nx">tu</span> <span class="nx">red</span><span class="p">.</span>

<span class="o">!</span><span class="p">[</span><span class="nx">Browsersync</span> <span class="nx">UI</span><span class="p">](</span><span class="sr">/assets/im</span><span class="nx">ages</span><span class="o">/</span><span class="nx">blog</span><span class="o">/</span><span class="nx">browsersync</span><span class="o">-</span><span class="nx">url</span><span class="p">.</span><span class="nx">png</span><span class="p">){:.</span><span class="nx">img</span><span class="o">-</span><span class="nx">fluid</span><span class="p">}</span>

<span class="nx">Este</span> <span class="nx">es</span> <span class="nx">el</span> <span class="nx">aspecto</span> <span class="nx">de</span> <span class="nx">la</span> <span class="nx">UI</span> <span class="nx">de</span> <span class="nx">Browsersync</span><span class="p">,</span> <span class="nx">que</span> <span class="nx">en</span> <span class="nx">mi</span> <span class="nx">caso</span> <span class="nx">estÃ¡</span> <span class="nx">en</span> <span class="nx">el</span> <span class="nx">puerto</span> <span class="mi">3001</span><span class="p">.</span>

<span class="o">!</span><span class="p">[</span><span class="nx">Browsersync</span> <span class="nx">UI</span><span class="p">](</span><span class="sr">/assets/im</span><span class="nx">ages</span><span class="o">/</span><span class="nx">blog</span><span class="o">/</span><span class="nx">browsersync</span><span class="o">-</span><span class="nx">ui</span><span class="p">.</span><span class="nx">png</span><span class="p">){:.</span><span class="nx">img</span><span class="o">-</span><span class="nx">fluid</span><span class="p">}</span>

<span class="err">###</span> <span class="mi">7</span><span class="p">.</span> <span class="nx">Vigilar</span> <span class="nx">cambios</span> 










<span class="o">**</span><span class="nx">Ejecutar</span> <span class="nx">Jekyll</span> <span class="nx">y</span> <span class="nx">lanzar</span> <span class="nx">Browsersync</span><span class="o">**</span>

<span class="nx">Con</span> <span class="nx">la</span> <span class="nx">orden</span> <span class="s2">`jekyll serve`</span> <span class="nx">Jekyll</span> <span class="nx">monta</span> <span class="nx">un</span> <span class="nx">servidor</span> <span class="nx">interno</span> <span class="nx">en</span> <span class="nx">localhost</span><span class="p">:</span><span class="mi">4000</span><span class="p">,</span> <span class="nx">pero</span> <span class="nx">como</span> <span class="nx">hemos</span> <span class="nx">comentado</span><span class="p">,</span> <span class="nx">utilizar</span> <span class="nx">Browsersync</span> <span class="nx">tiene</span> <span class="nx">sus</span> <span class="nx">ventajas</span><span class="p">.</span>

<span class="nx">Necesitamos</span> <span class="nx">ejecutar</span> <span class="nx">Jekyll</span> <span class="nx">para</span> <span class="nx">que</span> <span class="nx">procese</span> <span class="nx">Markdown</span><span class="p">,</span> <span class="nx">copie</span> <span class="nx">los</span> <span class="nx">assets</span><span class="p">,</span> <span class="nx">las</span> <span class="nx">pÃ¡ginas</span> <span class="nx">independientes</span> <span class="nx">y</span> <span class="nx">los</span> <span class="nx">archivos</span> <span class="nx">del</span> <span class="nx">blog</span> <span class="nx">a</span> <span class="err">\</span><span class="nx">_dist</span><span class="p">,</span> <span class="nx">pero</span> <span class="nx">no</span> <span class="nx">queremos</span> <span class="nx">otro</span> <span class="nx">server</span> <span class="nx">en</span> <span class="nx">funcionamiento</span><span class="p">.</span>

<span class="nx">Por</span> <span class="nx">esta</span> <span class="nx">razÃ³n</span><span class="p">,</span> <span class="nx">no</span> <span class="nx">vamos</span> <span class="nx">a</span> <span class="nx">ejecutar</span> <span class="s2">`jekyll serve`</span><span class="p">,</span> <span class="nx">en</span> <span class="nx">su</span> <span class="nx">lugar</span> <span class="nx">vamos</span> <span class="nx">a</span> <span class="nx">ejecutar</span> <span class="s2">`jekyll build`</span><span class="p">.</span>

<span class="s2">`jekyll serve`</span> <span class="nx">procesa</span> <span class="nx">el</span> <span class="nx">html</span><span class="p">,</span> <span class="nx">copia</span> <span class="nx">los</span> <span class="nx">archivos</span> <span class="nx">a</span> <span class="err">\</span><span class="nx">_dist</span><span class="p">,</span> <span class="nx">monta</span> <span class="nx">un</span> <span class="nx">server</span> <span class="nx">local</span> <span class="nx">y</span> <span class="nx">vigila</span> <span class="nx">los</span> <span class="nx">cambios</span><span class="p">.</span>

<span class="s2">`jekyll build`</span> <span class="nx">se</span> <span class="nx">limita</span> <span class="nx">a</span> <span class="nx">procesar</span> <span class="nx">el</span> <span class="nx">html</span> <span class="nx">y</span> <span class="nx">copiar</span> <span class="nx">los</span> <span class="nx">archivos</span> <span class="nx">a</span> <span class="err">\</span><span class="nx">_dist</span><span class="p">.</span>

<span class="nx">Para</span> <span class="nx">ejecutar</span> <span class="nx">Jekyll</span> <span class="nx">desde</span> <span class="nx">Gulp</span> <span class="nx">utilizo</span> <span class="nx">el</span> <span class="nx">plugin</span> <span class="p">[</span><span class="nx">Gulp</span><span class="o">-</span><span class="nx">shell</span><span class="p">](</span><span class="nx">https</span><span class="p">:</span><span class="c1">//www.npmjs.com/package/gulp-shell).</span>

<span class="s2">```js
// Build Jekyll
gulp.task("build:jekyll", function () {
  return gulp
    .src("index.html", { read: false })
    .pipe(
      shell([
        "bundle exec jekyll build --drafts --config _config.yml,_config.dev.yml",
      ])
    )
    .on("error", gutil.log);
});
</span></code></pre></div></div>

<p>Y asÃ­ es como estoy lanzando Browsersync desde Gulp:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Serve</span>
<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="dl">"</span><span class="s2">serve</span><span class="dl">"</span><span class="p">,</span> <span class="p">[</span><span class="dl">"</span><span class="s2">sass</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">build:jekyll</span><span class="dl">"</span><span class="p">],</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="nx">browserSync</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span>
    <span class="na">port</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span>
    <span class="na">server</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">baseDir</span><span class="p">:</span> <span class="dl">"</span><span class="s2">./_site</span><span class="dl">"</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div>

<p><strong>Vigilar cambios y refrescar el navegador</strong></p>

<p>Queremos que Gulp vigile los cambios y refresque el navegador cuando cambie algo en cualquier parte del proyecto.</p>

<p>Para esto tenemos que crear una tarea watch en Gulp:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Watch</span>
<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="dl">"</span><span class="s2">watch</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="nx">gulp</span><span class="p">.</span><span class="nx">watch</span><span class="p">([</span><span class="dl">"</span><span class="s2">scss/*.scss</span><span class="dl">"</span><span class="p">],</span> <span class="p">[</span><span class="dl">"</span><span class="s2">build:styles</span><span class="dl">"</span><span class="p">]);</span>
  <span class="nx">gulp</span><span class="p">.</span><span class="nx">watch</span><span class="p">([</span><span class="dl">"</span><span class="s2">js/*js</span><span class="dl">"</span><span class="p">],</span> <span class="p">[</span><span class="dl">"</span><span class="s2">build:jekyll</span><span class="dl">"</span><span class="p">]);</span>
  <span class="nx">gulp</span><span class="p">.</span><span class="nx">watch</span><span class="p">(</span>
    <span class="p">[</span><span class="dl">"</span><span class="s2">**/*.+(html|md|markdown|MD)</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">!_site/**/*.*</span><span class="dl">"</span><span class="p">],</span>
    <span class="p">[</span><span class="dl">"</span><span class="s2">rebuild:jekyll</span><span class="dl">"</span><span class="p">]</span>
  <span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<div class="alert alert-info" role="alert">
  <p><i class="fas fa-sticky-note"></i> Nota:</p>
  <p>Es importante excluir la carpeta _site de la tarea watch, para que browsersync no entre en un loop de recargar el navegador.</p>
</div>

<p>Crear un archivo de configuraciÃ³n distinto para desarrollo no es obligatorio pero puede ser Ãºtil.</p>

<p>En mi caso he creado un archivo _config.dev.yml en el que he cambiado la url del proyecto para desarrollo.</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">url</span><span class="pi">:</span> <span class="s">http://netinetidesign.com // url en producciÃ³n</span>
<span class="na">url</span><span class="pi">:</span> <span class="s">http://localhost:4000     // url en desarrollo</span>
</code></pre></div></div>

<p>Para sobreescribir tu config.yml con config.dev.yml cuando ejecutes jekyll en desarrollo, hazlo de este modo:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="dl">"</span><span class="s2">bundle exec jekyll build --config _config.yml,_config.dev.yml</span><span class="dl">"</span><span class="p">;</span>
</code></pre></div></div>

<div class="alert alert-info" role="alert">
  <p><i class="fab fa-github"></i></p>
  <p>Mi <a href="https://github.com/MarcelReig/netinetidesign/blob/master/gulpfile.js" target="_blanc">gulpfile</a> por si te sirve de referencia.</p>
</div>
<div class="spacer"></div>
:ET